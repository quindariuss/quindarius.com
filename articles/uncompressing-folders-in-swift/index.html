<head>
	<title>quin'darius</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../../css/home.css">
	<link rel="stylesheet" href="../../css/fonts.css">
	<link rel="stylesheet" href="../../css/typography.css">
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:site" content="@quindarius" />
	<meta name="twitter:title" content="Uncompressing Folders in Swift" />
	<meta name="twitter:description" content="How to Uncompress Folders in Swift without hating life." />
	<meta name="twitter:image" content="pic.png" />
	<meta name="twitter:image:alt" content="Quin'darius, Uncompressing Folders in Swift" />
</head>

<body>
	<center>
		<a rel=author href="../../index.html">
			<h1>
				Quindarius
			</h1>
		</a>
		<nav>
			<a href="../../articles.html">articles</a>
			<span>.</span>
			<a href="../../books.html">books</a>
			<span>.</span>
			<a href="../../about.html">about</a>
		</nav>
		<h2>Uncompressing Folders in Swift</h2>
		<ul>
			<li>
				<h4>
					Table of Contents
				</h4>
			</li>
			<ul>
				<li>
					<a>
						<h5>
							Introduction
						</h5>
					</a>
				</li>
				<li>
					<a>
						<h5>
						Questions
						</h5>
					</a>
				</li>
				<li>
					
					<a>
						<h5>
						Answers
						</h5>
					</a>
				</li>
				<li>
					<a>
						<h5>
						Conclusion
						</h5>
					</a>
				</li>
			</ul>
		</ul>
		<h3>Introduction</h3>
		<p>
			So imagine you need to multiple files from an API. 
			One option for doing so is to get all the file names and request them from what ever file server you are using.
			This is terrible don't do this.
			The optimal way is to bundle the entire directory into a compressed format and distribute that one file.
			Okay great, say you needed these files in an iOS/iPadOS or MacOS application. 
			That means you will need to decompress the files that you received in swift. 
		</p>
		<h3>Questions</h3>
		<p>
			These are some questions you will need to ask yourself before properly doing this in the way I lay out.
		</p>
		<ol>
			<li>
				<strong>
					Where is my compressed folder and where do I want the decompressed folder?
				</strong>
			</li>
			<li>
				<strong>
					How do I handle access to the necessary files and data streams?
				</strong>
			</li>
			<li>
				<strong>
					How do I process these files and data streams?
				</strong>
			</li>
		</ol>
		<h3>Answers</h3>
		<p>
			<strong>
				Where is my compressed folder and where do I want the decompressed folder?
			</strong>
		</p>
		<pre style="text-align=left">
			<code style="text-align=left">
import AppleArchive
import System

let compressedFolderURL = Bundle.main.url(forResource: "compressed", withExtension: "aar")
				
let compressedFolderFilePath = FilePath(url!.relativePath)
			</code>
			<code>
let decompressedPath = Bundle.main.resourceURL!.relativePath + "/decompressed/"

if !FileManager.default.fileExists(atPath: decompressedPath) {
  do {
	  try FileManager.default.createDirectory(atPath: decompressedPath,
		  withIntermediateDirectories: false)
  } catch {
	  fatalError("Unable to create destination directory.")
	  }
 }
 
let decompressedFilePath = FilePath(decompressedPath)
			</code>
		</pre>
		<p>
			<strong>
				How do I handle access to the necessary files and data streams?
			</strong>
			<pre>
				<code>
let readFileStream = ArchiveByteStream.fileStream(
	path: archiveFilePath, 
	mode: .readOnly, 
	options: [], 
	permissions: FilePermissions(rawValue: 0o644)
	)
	
let decompressStream = ArchiveByteStream.decompressionStream(
	readingFrom: readFileStream!
	)
	
let decodeStream = ArchiveStream.decodeStream(
	readingFrom: decompressStream!
	)
	
let extractStream = ArchiveStream.extractStream(
	extractingTo: decompressedFilePath, 
	flags: [.ignoreOperationNotPermitted]
	)	
				</code>
			</pre>
		</p>
		<p>
			<strong>
				How do I process these files and data streams?
			</strong>
		</p>
		<pre>
			<code>
do {

	try? ArchiveStream.process(readingFrom: 
		decodeStream!, 
		writingTo: extractStream!
		)
} catch {
	print(error)
}
			</code>
		</pre>
		<h3>Conclusion</h3>
		<p>
			There you have it a all in one guide to opening up folders in swift.
			I thought this was going to more straight forward, but I guess this isn't <em>bad</em>.
			Also, heads up you can't do <code>.zip</code> with native swift code non-trivally. 
	</p>
	<p>
		<a href="mailto:quindarius@hey.com?subject=Uncompressing Folders in Swift">
			Spark a thought? Send me an email!
		</a>
	</p>
	
	
	</center>
</body>